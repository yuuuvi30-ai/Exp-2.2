<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dynamic Product Filter</title>
  <style>
    * { box-sizing: border-box; }
    body{
      margin:0;
      font-family: Arial, sans-serif;
      background:#f5f7fb;
      padding:24px;
      color:#111827;
    }
    .wrap{
      max-width:1100px;
      margin:0 auto;
      background:#fff;
      border:1px solid #e7eaf0;
      border-radius:14px;
      box-shadow:0 10px 30px rgba(0,0,0,0.06);
      padding:18px;
    }
    h1{
      margin:4px 0 6px;
      font-size:22px;
    }
    .sub{
      margin:0 0 14px;
      color:#6b7280;
      font-size:14px;
      line-height:1.4;
    }
    .controls{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
      padding:12px;
      border:1px solid #eef2f7;
      border-radius:12px;
      background:#fbfcff;
      margin-bottom:14px;
    }
    .left{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }
    label{
      font-weight:700;
      font-size:13px;
      color:#111827;
    }
    select, input{
      padding:10px 12px;
      border-radius:10px;
      border:1.8px solid #e5e7eb;
      outline:none;
      font-size:14px;
      background:#fff;
      transition:border-color 200ms ease, box-shadow 200ms ease;
    }
    select:focus, input:focus{
      border-color:#2563eb;
      box-shadow:0 0 0 4px rgba(37,99,235,0.12);
    }
    .meta{
      font-size:13px;
      color:#6b7280;
    }
    .grid{
      display:grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap:14px;
    }
    @media (max-width: 980px){
      .grid{ grid-template-columns: repeat(3, minmax(0,1fr)); }
    }
    @media (max-width: 720px){
      .grid{ grid-template-columns: repeat(2, minmax(0,1fr)); }
    }
    @media (max-width: 460px){
      .grid{ grid-template-columns: 1fr; }
    }
    .card{
      border:1px solid #e7eaf0;
      border-radius:14px;
      padding:14px;
      background:#fff;
      box-shadow:0 6px 16px rgba(0,0,0,0.05);
      transition: transform 180ms ease, opacity 220ms ease;
      transform: translateY(6px);
      opacity:0;
    }
    .card.show{
      transform: translateY(0);
      opacity:1;
    }
    .tag{
      display:inline-flex;
      align-items:center;
      gap:6px;
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      background:#f3f4f6;
      color:#374151;
      margin-bottom:10px;
    }
    .name{
      font-size:16px;
      font-weight:800;
      margin:0 0 8px;
    }
    .desc{
      margin:0 0 12px;
      color:#6b7280;
      font-size:13px;
      line-height:1.45;
      min-height:38px;
    }
    .priceRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-top:6px;
    }
    .price{
      font-weight:900;
      font-size:16px;
    }
    .rating{
      font-size:13px;
      color:#111827;
      padding:6px 10px;
      border-radius:10px;
      background:#eef2ff;
      border:1px solid #e5e7eb;
    }
    .empty{
      border:1px dashed #d1d5db;
      border-radius:14px;
      padding:22px;
      text-align:center;
      color:#6b7280;
      background:#fafafa;
      grid-column: 1 / -1;
    }
    .btn{
      padding:10px 12px;
      border-radius:10px;
      border:1.8px solid #e5e7eb;
      background:#fff;
      cursor:pointer;
      font-weight:700;
      transition: transform 120ms ease, border-color 200ms ease, box-shadow 200ms ease;
    }
    .btn:hover{
      border-color:#2563eb;
      box-shadow:0 0 0 4px rgba(37,99,235,0.10);
    }
    .btn:active{ transform: scale(0.98); }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Dynamic Product Filter</h1>
    <p class="sub">Filter by category and sort using the dropdown. Cards animate on each update.</p>

    <div class="controls">
      <div class="left">
        <div>
          <label for="search">Search</label><br />
          <input id="search" type="text" placeholder="e.g., headphones" />
        </div>

        <div>
          <label for="category">Category</label><br />
          <select id="category">
            <option value="all">All</option>
          </select>
        </div>

        <div>
          <label for="sort">Sort</label><br />
          <select id="sort">
            <option value="featured">Featured</option>
            <option value="price-asc">Price: Low → High</option>
            <option value="price-desc">Price: High → Low</option>
            <option value="rating-desc">Rating: High → Low</option>
            <option value="name-asc">Name: A → Z</option>
          </select>
        </div>

        <div style="margin-top:18px;">
          <button class="btn" id="reset">Reset</button>
        </div>
      </div>

      <div class="meta" id="meta">0 items</div>
    </div>

    <div class="grid" id="grid"></div>
  </div>

  <script>
    const products = [
      { id: 1, name: "Wireless Headphones", category: "Electronics", price: 2499, rating: 4.6, desc: "Comfort fit with clear bass and long battery." },
      { id: 2, name: "Smart Watch", category: "Electronics", price: 3999, rating: 4.3, desc: "Fitness tracking with notifications and GPS." },
      { id: 3, name: "Cotton T-Shirt", category: "Fashion", price: 499, rating: 4.2, desc: "Soft breathable cotton for daily wear." },
      { id: 4, name: "Running Shoes", category: "Fashion", price: 2299, rating: 4.5, desc: "Lightweight shoes for running and comfort." },
      { id: 5, name: "Coffee Mug", category: "Home", price: 199, rating: 4.1, desc: "Ceramic mug with heat-safe finish." },
      { id: 6, name: "Desk Lamp", category: "Home", price: 899, rating: 4.4, desc: "Adjustable LED lamp for study and work." },
      { id: 7, name: "Notebook Pack", category: "Stationery", price: 299, rating: 4.0, desc: "Pack of ruled notebooks for class notes." },
      { id: 8, name: "Gel Pen Set", category: "Stationery", price: 159, rating: 4.3, desc: "Smooth writing pens with quick-dry ink." },
      { id: 9, name: "Bluetooth Speaker", category: "Electronics", price: 1799, rating: 4.7, desc: "Loud sound, deep bass, compact design." },
      { id: 10, name: "Hoodie", category: "Fashion", price: 1499, rating: 4.4, desc: "Warm hoodie with a relaxed fit." }
    ];

    const grid = document.getElementById("grid");
    const meta = document.getElementById("meta");
    const search = document.getElementById("search");
    const category = document.getElementById("category");
    const sort = document.getElementById("sort");
    const reset = document.getElementById("reset");

    function formatINR(n){
      return "₹" + n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    function uniqueCategories(items){
      const set = new Set(items.map(p => p.category));
      return ["all", ...Array.from(set).sort((a,b)=>a.localeCompare(b))];
    }

    function populateCategories(){
      const cats = uniqueCategories(products);
      category.innerHTML = cats.map(c => {
        const label = c === "all" ? "All" : c;
        return `<option value="${c}">${label}</option>`;
      }).join("");
    }

    function applyFilterSort(){
      const q = search.value.trim().toLowerCase();
      const cat = category.value;
      const s = sort.value;

      let list = products.filter(p => {
        const matchesText = (p.name.toLowerCase().includes(q) || p.desc.toLowerCase().includes(q));
        const matchesCat = (cat === "all" || p.category === cat);
        return matchesText && matchesCat;
      });

      if (s === "price-asc") list.sort((a,b)=>a.price - b.price);
      else if (s === "price-desc") list.sort((a,b)=>b.price - a.price);
      else if (s === "rating-desc") list.sort((a,b)=>b.rating - a.rating);
      else if (s === "name-asc") list.sort((a,b)=>a.name.localeCompare(b.name));
      else list.sort((a,b)=>a.id - b.id);

      render(list);
    }

    function render(list){
      grid.innerHTML = "";
      meta.textContent = list.length + (list.length === 1 ? " item" : " items");

      if (list.length === 0){
        const div = document.createElement("div");
        div.className = "empty";
        div.textContent = "No products found. Try changing search or filters.";
        grid.appendChild(div);
        return;
      }

      list.forEach((p, idx) => {
        const card = document.createElement("div");
        card.className = "card";

        card.innerHTML = `
          <div class="tag">${p.category}</div>
          <h3 class="name">${p.name}</h3>
          <p class="desc">${p.desc}</p>
          <div class="priceRow">
            <div class="price">${formatINR(p.price)}</div>
            <div class="rating">⭐ ${p.rating.toFixed(1)}</div>
          </div>
        `;

        grid.appendChild(card);

        requestAnimationFrame(() => {
          setTimeout(() => card.classList.add("show"), idx * 30);
        });
      });
    }

    search.addEventListener("input", applyFilterSort);
    category.addEventListener("change", applyFilterSort);
    sort.addEventListener("change", applyFilterSort);

    reset.addEventListener("click", () => {
      search.value = "";
      category.value = "all";
      sort.value = "featured";
      applyFilterSort();
    });

    populateCategories();
    applyFilterSort();
  </script>
</body>
</html>
